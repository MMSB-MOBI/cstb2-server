{"version":3,"sources":["webpack:///./node_modules/@mmsb/result_page/dist/esm-es5/result-page.entry.js"],"names":["globalThis","window","global","self","createCommonjsModule","fn","module","exports","download","root","factory","commonjsGlobal","data","strFileName","strMimeType","blob","reader","defaultMime","mimeType","payload","url","anchor","document","createElement","toString","a","String","myBlob","Blob","MozBlob","WebKitBlob","fileName","call","bind","this","length","split","pop","href","indexOf","ajax","XMLHttpRequest","open","responseType","onload","e","target","response","setTimeout","send","test","navigator","msSaveBlob","dataUrlToBlob","saver","type","i","tempUiArr","Uint8Array","mx","charCodeAt","strUrl","parts","decoder","atob","decodeURIComponent","binData","uiArr","winMode","setAttribute","className","innerHTML","style","display","body","appendChild","click","removeChild","URL","revokeObjectURL","userAgent","replace","confirm","location","f","src","createObjectURL","constructor","btoa","y","encodeURIComponent","FileReader","result","readAsDataURL","resultPageCss","ResultPage","hostRef","shouldHighlight","selected","undefined","current_references","current_sgrnas","select_card","display_log","prototype","action","componentWillLoad","sequence_data_json","loadSequenceData","organism_data","formatOrganismData","fasta_metadata_json","fasta_metadata","JSON","parse","organisms","org_names","excluded_genomes","excluded_names","gene","gene_json","loadGenes","sequence_data","complete_data","forEach","occurences","occ","all_ref","ref","coords","Object","values","gene_number","coord","map","c","data_parsed","all_data","entries","org_entry","org","organism","fasta_entry","sgrna","seq","on_gene","not_on_gene","getReferences","find","organism_entry","getReferencesWithSeq","sequence_entry","sequence","occurence_entry","ref_entry","getSgrnas","filtered_sgrna","sgrnas","matches_1","Set","filter","v","has","getSize","fasta_ref","size","getHiddenReferences","current_ref","difference","x","includes","getFastaHeader","fasta_header","header","getGenesCoordinates","getCoordinates","coord_obj","defineProperty","get","all_coords","push","parseInt","exec","sort","b","enumerable","configurable","isCompleteSelection","addToCard","all_select_card","concat","item","pos","removeFromCard","select_sgrna","createSelectionFile","_this","sgrna_obj","data_str_1","is_on_gene","job_tag","alert","displayCard","coordinates","class","list_coordinates","all_start_coordinates","genome_size","selected_sgrna_coordinates","gene_coordinates","current_genes","active_rotation","displayCoords","overflowGestion","querySelector","scrollHeight","clientHeight","displayExcluded","join","render","result_page","onClick","total_hits","card_selection","onOrganismClick","ref_selected","initial_sgrnas","reinitSelection","cardAction","checked","fasta_refs","selectOrg","selectRef","assign","selectSgrna"],"mappings":"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","file":"js/chunk-2d0ba6f8.6d5c189f.js","sourcesContent":["import { r as registerInstance, h } from './index-209bbf7a.js';\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\nfunction createCommonjsModule(fn, module) {\n    return module = { exports: {} }, fn(module, module.exports), module.exports;\n}\nvar download = createCommonjsModule(function (module, exports) {\n    //download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n    // v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n    // v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n    // v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n    // v4 adds AMD/UMD, commonJS, and plain browser support\n    // v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n    // v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n    // https://github.com/rndme/download\n    (function (root, factory) {\n        {\n            // Node. Does not work with strict CommonJS, but\n            // only CommonJS-like environments that support module.exports,\n            // like Node.\n            module.exports = factory();\n        }\n    }(commonjsGlobal, function () {\n        return function download(data, strFileName, strMimeType) {\n            var self = window, // this script is only for browsers anyway...\n            defaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n            mimeType = strMimeType || defaultMime, payload = data, url = !strFileName && !strMimeType && payload, anchor = document.createElement(\"a\"), toString = function (a) { return String(a); }, myBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString), fileName = strFileName || \"download\", blob, reader;\n            myBlob = myBlob.call ? myBlob.bind(self) : Blob;\n            if (String(this) === \"true\") { //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n                payload = [payload, mimeType];\n                mimeType = payload[0];\n                payload = payload[1];\n            }\n            if (url && url.length < 2048) { // if no filename and no mime, assume a url was passed as the only argument\n                fileName = url.split(\"/\").pop().split(\"?\")[0];\n                anchor.href = url; // assign href prop to temp anchor\n                if (anchor.href.indexOf(url) !== -1) { // if the browser determines that it's a potentially valid url path:\n                    var ajax = new XMLHttpRequest();\n                    ajax.open(\"GET\", url, true);\n                    ajax.responseType = 'blob';\n                    ajax.onload = function (e) {\n                        download(e.target.response, fileName, defaultMime);\n                    };\n                    setTimeout(function () { ajax.send(); }, 0); // allows setting custom ajax headers using the return:\n                    return ajax;\n                } // end if valid url?\n            } // end if url?\n            //go ahead and download dataURLs right away\n            if (/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)) {\n                if (payload.length > (1024 * 1024 * 1.999) && myBlob !== toString) {\n                    payload = dataUrlToBlob(payload);\n                    mimeType = payload.type || defaultMime;\n                }\n                else {\n                    return navigator.msSaveBlob ? // IE10 can't do a[download], only Blobs:\n                        navigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n                        saver(payload); // everyone else can save dataURLs un-processed\n                }\n            }\n            else { //not data url, is it a string with special needs?\n                if (/([\\x80-\\xff])/.test(payload)) {\n                    var i = 0, tempUiArr = new Uint8Array(payload.length), mx = tempUiArr.length;\n                    for (i; i < mx; ++i)\n                        tempUiArr[i] = payload.charCodeAt(i);\n                    payload = new myBlob([tempUiArr], { type: mimeType });\n                }\n            }\n            blob = payload instanceof myBlob ?\n                payload :\n                new myBlob([payload], { type: mimeType });\n            function dataUrlToBlob(strUrl) {\n                var parts = strUrl.split(/[:;,]/), type = parts[1], decoder = parts[2] == \"base64\" ? atob : decodeURIComponent, binData = decoder(parts.pop()), mx = binData.length, i = 0, uiArr = new Uint8Array(mx);\n                for (i; i < mx; ++i)\n                    uiArr[i] = binData.charCodeAt(i);\n                return new myBlob([uiArr], { type: type });\n            }\n            function saver(url, winMode) {\n                if ('download' in anchor) { //html5 A[download]\n                    anchor.href = url;\n                    anchor.setAttribute(\"download\", fileName);\n                    anchor.className = \"download-js-link\";\n                    anchor.innerHTML = \"downloading...\";\n                    anchor.style.display = \"none\";\n                    document.body.appendChild(anchor);\n                    setTimeout(function () {\n                        anchor.click();\n                        document.body.removeChild(anchor);\n                        if (winMode === true) {\n                            setTimeout(function () { self.URL.revokeObjectURL(anchor.href); }, 250);\n                        }\n                    }, 66);\n                    return true;\n                }\n                // handle non-a[download] safari as best we can:\n                if (/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n                    if (/^data:/.test(url))\n                        url = \"data:\" + url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n                    if (!window.open(url)) { // popup blocked, offer direct download:\n                        if (confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")) {\n                            location.href = url;\n                        }\n                    }\n                    return true;\n                }\n                //do iframe dataURL download (old ch+FF):\n                var f = document.createElement(\"iframe\");\n                document.body.appendChild(f);\n                if (!winMode && /^data:/.test(url)) { // force a mime that will download:\n                    url = \"data:\" + url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n                }\n                f.src = url;\n                setTimeout(function () { document.body.removeChild(f); }, 333);\n            } //end saver\n            if (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n                return navigator.msSaveBlob(blob, fileName);\n            }\n            if (self.URL) { // simple fast and modern way using Blob and URL:\n                saver(self.URL.createObjectURL(blob), true);\n            }\n            else {\n                // handle non-Blob()+non-URL browsers:\n                if (typeof blob === \"string\" || blob.constructor === toString) {\n                    try {\n                        return saver(\"data:\" + mimeType + \";base64,\" + self.btoa(blob));\n                    }\n                    catch (y) {\n                        return saver(\"data:\" + mimeType + \",\" + encodeURIComponent(blob));\n                    }\n                }\n                // Blob but not URL support:\n                reader = new FileReader();\n                reader.onload = function (e) {\n                    saver(this.result);\n                };\n                reader.readAsDataURL(blob);\n            }\n            return true;\n        }; /* end download() */\n    }));\n});\nvar resultPageCss = \".root.sc-result-page{display:grid;padding:1rem 2rem;-webkit-box-sizing:border-box;box-sizing:border-box;grid-template-columns:-webkit-min-content auto;grid-template-columns:min-content auto;grid-column-gap:5rem;grid-row-gap:1rem;cursor:default;font-family:\\\"Helvetica Neue\\\", Helvetica, Arial;grid-template-areas:\\\"header header\\\"\\n  \\\"table graphic\\\"}.header.sc-result-page{grid-area:header}.table.sc-result-page{grid-area:table}.right-pannel.sc-result-page{grid-area:graphic}.first-line.sc-result-page{display:grid;grid-template-columns:-webkit-min-content auto;grid-template-columns:min-content auto;grid-column-gap:1em;height:-webkit-max-content;height:-moz-max-content;height:max-content}.genome-rep.sc-result-page{display:grid;grid-template-columns:auto 30em}.legend.sc-result-page{padding-top:10em}.log-info.sc-result-page{background-color:#c6ecc6;border:solid;border-width:1px;border-color:green}.log-info-content.sc-result-page{display:grid;grid-template-columns:-webkit-max-content auto;grid-template-columns:max-content auto;grid-column-gap:2em;padding:0.5em}.log-info-header.sc-result-page{display:-ms-flexbox;display:flex;padding:0.5em}.log-info-header.open.sc-result-page{background-color:#37ae37}.log-info-header.sc-result-page:hover{background-color:#37ae37;cursor:pointer}.log-info-header.sc-result-page>i.sc-result-page{-ms-flex-align:center;align-items:center}.first-col.sc-result-page{display:grid}.excluded-list.sc-result-page{padding:0.4em;overflow:auto;height:6vh;border:solid;border-color:green;border-width:1px;border-radius:5px;background-color:#ecf9ec}.sc-result-page::-webkit-scrollbar{width:10px}.sc-result-page::-webkit-scrollbar-thumb{-webkit-box-shadow:inset 0 0 10px 10px grey;box-shadow:inset 0 0 10px 10px grey;border:solid 2px transparent;border-radius:7px}.download.sc-result-page{margin-top:1em;border:solid;padding:0.5em;width:-webkit-max-content;width:-moz-max-content;width:max-content;background-color:#cccccc !important;border-radius:3px;border-width:1px;border-color:#808080}.download.sc-result-page:hover{background-color:#bfbfbf !important}\";\nvar ResultPage = /** @class */ (function () {\n    function ResultPage(hostRef) {\n        registerInstance(this, hostRef);\n        this.shouldHighlight = false;\n        //@State() display_linear_card: boolean = true;\n        //@State() tableCrisprOrganisms: string[] = [];\n        this.selected = { 'org': undefined, 'sgrna': undefined, 'ref': undefined, 'size': undefined, 'fasta_header': undefined }; //org, sgrna, ref, size\n        this.current_references = [];\n        this.current_sgrnas = [];\n        this.select_card = [];\n        this.display_log = false;\n    }\n    ResultPage.prototype.action = function () {\n        this.shouldHighlight = true;\n    };\n    ResultPage.prototype.componentWillLoad = function () {\n        //Initialize data\n        //this.tableCrisprOrganisms = this.org_names.split(\"&\");\n        this.sequence_data_json = this.loadSequenceData();\n        this.organism_data = this.formatOrganismData();\n        this.fasta_metadata_json = typeof this.fasta_metadata === \"object\" ? this.fasta_metadata : JSON.parse(this.fasta_metadata);\n        this.organisms = this.org_names.split(\"&\");\n        this.excluded_genomes = this.excluded_names.split(\"&\");\n        if (this.gene !== undefined) {\n            this.gene_json = this.loadGenes();\n        }\n        /*const org = this.tableCrisprOrganisms[0];\n        this.current_references = this.getReferences(org)\n        this.hidden_references = this.getHiddenReferences(org)\n        const ref = this.current_references[0];\n    \n        this.current_sgrnas = this.getSgrnas(org, ref)\n        this.selected = {\n          org,\n          sgrna: this.current_sgrnas[0].seq,\n          ref,\n          size: this.getSize(org,ref),\n          fasta_header: this.getFastaHeader(org, ref)\n        };\n    \n         \n        if(this.gene !== \"undefined\"){\n          this.gene_json = JSON.parse(this.gene);\n          this.current_genes = this.getGenesCoordinates(org, ref);\n        }*/\n    };\n    ResultPage.prototype.loadSequenceData = function () {\n        var sequence_data = typeof this.complete_data === \"object\" ? this.complete_data : JSON.parse(this.complete_data);\n        sequence_data\n            .forEach(function (e) { return e.occurences\n            .forEach(function (occ) { return occ.all_ref\n            .forEach(function (ref) { return ref.coords = Object.values(ref.coords); }); }); });\n        return sequence_data;\n    };\n    ResultPage.prototype.loadGenes = function () {\n        var gene_json = this.gene && typeof this.gene === 'object' ? this.gene : JSON.parse(this.gene);\n        Object.values(gene_json).forEach(function (ref) {\n            var gene_number = 0;\n            Object.values(ref).forEach(function (coord) {\n                coord.map(function (c) { gene_number = gene_number + 1; c.gene_number = gene_number; });\n            });\n        });\n        return gene_json;\n    };\n    /**\n     * Format raw json organisms data to OrganismHit[] for easier manipulation\n     */\n    ResultPage.prototype.formatOrganismData = function () {\n        var data_parsed = this.all_data && typeof this.all_data === 'object' ? this.all_data : JSON.parse(this.all_data);\n        return Object.entries(data_parsed)\n            .map(function (org_entry) {\n            var org = org_entry[0];\n            return {\n                organism: org,\n                fasta_entry: Object.entries(org_entry[1])\n                    .map(function (fasta_entry) { return ({\n                    ref: fasta_entry[0],\n                    // @ts-ignore\n                    sgrna: Object.entries(fasta_entry[1]).map(function (sgrna) { return ({ seq: sgrna[0], coords: Object.values(sgrna[1].coords), on_gene: sgrna[1].on_gene ? Object.values(sgrna[1].on_gene) : undefined, not_on_gene: sgrna[1].not_on_gene ? Object.values(sgrna[1].not_on_gene) : undefined }); })\n                }); })\n            };\n        });\n    };\n    /**\n     * Get list of references (fasta subsequences) for one organism\n     * @param org : organism\n     */\n    ResultPage.prototype.getReferences = function (org) {\n        return this.organism_data\n            .find(function (organism_entry) { return organism_entry.organism === org; })\n            .fasta_entry.map(function (e) { return e.ref; });\n    };\n    ResultPage.prototype.getReferencesWithSeq = function (org, sgrna) {\n        return this.sequence_data_json.find(function (sequence_entry) { return sequence_entry.sequence === sgrna; })\n            .occurences.find(function (occurence_entry) { return occurence_entry.org === org; })\n            .all_ref.map(function (ref_entry) { return ref_entry.ref; });\n    };\n    /**\n     * Return sgrna hits for one organism and one reference. Just keep filtered_sgrna if filtered_sgrna is provided.\n     * @param org : organism\n     * @param ref : reference (fasta subsequence)\n     * @param filtered_sgrna : sgrna to keep if selection has been done\n     */\n    ResultPage.prototype.getSgrnas = function (org, ref, filtered_sgrna) {\n        var sgrnas = this.organism_data\n            .find(function (e) { return e.organism === org; })\n            .fasta_entry.find(function (e) { return e.ref === ref; }).sgrna;\n        if (filtered_sgrna) {\n            var matches_1 = new Set(filtered_sgrna);\n            sgrnas = sgrnas.filter(function (v) { return matches_1.has(v.seq); });\n        }\n        return sgrnas;\n    };\n    /**\n     * Get sequence size from one organism/reference couple\n     * @param org : organism\n     * @param ref : reference\n     */\n    ResultPage.prototype.getSize = function (org, ref) {\n        return this.fasta_metadata_json.find(function (e) { return e.org === org && e.fasta_ref === ref; }).size;\n    };\n    /**\n     * For given organism, get fasta subsequences with no sgrna on it.\n     * @param org : organism\n     */\n    ResultPage.prototype.getHiddenReferences = function (org) {\n        var current_ref = this.getReferences(org);\n        var all_ref = this.fasta_metadata_json.filter(function (fasta_metadata) { return fasta_metadata.org === org; }).map(function (e) { return e.fasta_ref; });\n        var difference = all_ref.filter(function (x) { return !current_ref.includes(x); }); //Get references in all_ref and not in current_ref\n        return difference;\n    };\n    /**\n     * For given organism and fasta subsequence, get fasta header\n     * @param org : organism\n     * @param ref : reference of fasta subsequence\n     */\n    ResultPage.prototype.getFastaHeader = function (org, ref) {\n        var fasta_header = this.fasta_metadata_json.find(function (e) { return e.org === org && e.fasta_ref === ref; }).header;\n        return fasta_header;\n    };\n    /**\n     * Get genes coordinates for given organism and fasta sequence\n     * @param org : organism\n     * @param ref : reference of fasta subsequence\n     */\n    ResultPage.prototype.getGenesCoordinates = function (org, ref) {\n        return this.gene_json[org][ref];\n    };\n    ResultPage.prototype.getCoordinates = function (sgrna) {\n        return this.current_sgrnas\n            .find(function (e) { return e.seq === sgrna; }).coords\n            .map(function (coord_obj) { return coord_obj.coord; });\n    };\n    Object.defineProperty(ResultPage.prototype, \"all_start_coordinates\", {\n        get: function () {\n            var all_coords = [];\n            this.current_sgrnas.forEach(function (e) { return e.coords.forEach(function (coord_obj) { return all_coords.push(parseInt(/\\(([0-9]*),/.exec(coord_obj.coord)[1])); }); });\n            return all_coords.sort(function (a, b) { return a - b; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ResultPage.prototype.isCompleteSelection = function () {\n        if (Object.values(this.selected).includes(undefined))\n            return false;\n        else\n            return true;\n    };\n    ResultPage.prototype.addToCard = function (sgrnas) {\n        var all_select_card = this.select_card.concat(sgrnas);\n        this.select_card = all_select_card.filter(function (item, pos) { return all_select_card.indexOf(item) === pos; }); //Array with unique elements\n        //Reassign to triger state\n    };\n    ResultPage.prototype.removeFromCard = function (sgrna) {\n        this.select_card = this.select_card.filter(function (select_sgrna) { return sgrna.includes(select_sgrna) ? false : true; });\n    };\n    ResultPage.prototype.createSelectionFile = function () {\n        var _this = this;\n        if (!this.select_card.length)\n            window.alert(\"No sgRNA selected\");\n        else {\n            var sgrnas = this.sequence_data_json.filter(function (sgrna_obj) { return _this.select_card.includes(sgrna_obj.sequence); });\n            var data_str_1 = this.gene_json ? \"#sgRNA\\torganism\\tfasta record\\tcoordinates\\tinside homologous gene\\n\" : \"#sgRNA\\torganism\\tfasta record\\tcoordinates\\n\";\n            sgrnas.forEach(function (sgrna) {\n                sgrna.occurences.forEach(function (occ) {\n                    occ.all_ref.forEach(function (ref) {\n                        ref.coords.forEach(function (coord) {\n                            data_str_1 = data_str_1 + (sgrna.sequence + \"\\t\" + occ.org + \"\\t\" + ref.ref + \"\\t\" + coord.coord);\n                            if (_this.gene_json)\n                                data_str_1 = data_str_1 + (\"\\t\" + (coord.is_on_gene.length ? \"true\" : \"false\"));\n                            data_str_1 = data_str_1 + \"\\n\";\n                        });\n                    });\n                });\n            });\n            download(data_str_1, this.job_tag + \"_selected_sgrnas.tsv\", \"text/plain\");\n        }\n    };\n    ResultPage.prototype.displayCard = function () {\n        if (this.isCompleteSelection()) {\n            var coordinates = this.getCoordinates(this.selected.sgrna);\n            return h(\"div\", { class: \"genomic-card\" }, h(\"div\", { class: \"genome-rep\" }, h(\"circular-barplot\", { list_coordinates: this.all_start_coordinates, genome_size: this.selected.size, selected_sgrna_coordinates: coordinates, gene_coordinates: this.current_genes, active_rotation: true }), h(\"div\", { class: \"legend\" }, h(\"circular-barplot-legend\", { gene: this.current_genes ? true : false }))));\n        }\n        else\n            return h(\"div\", { class: \"genomic-card\" });\n    };\n    ResultPage.prototype.displayCoords = function () {\n        if (this.isCompleteSelection()) {\n            return h(\"div\", { class: \"coords\" }, h(\"coord-box\", { selected: this.selected, current_sgrnas: this.current_sgrnas, current_genes: this.current_genes }));\n        }\n        else\n            return h(\"div\", { class: \"coords\" });\n    };\n    ResultPage.prototype.overflowGestion = function () {\n        if (document.querySelector(\".excluded-list\").scrollHeight > document.querySelector(\".excluded-list\").clientHeight) {\n            return h(\"div\", { class: \"show-all-eg\" }, \" \", h(\"i\", { class: \"material-icons\" }, \"arrow_drop_down\"), \" \");\n        }\n    };\n    ResultPage.prototype.displayExcluded = function () {\n        if (this.excluded_genomes[0] === \"\") {\n            return h(\"span\", null, \" No excluded genomes\");\n        }\n        else {\n            return [h(\"span\", null, \"Excluded genomes \"), h(\"div\", { class: \"excluded-list\" }, \" \", this.excluded_genomes.join(\";\"), \" \")];\n        }\n    };\n    ResultPage.prototype.render = function () {\n        var _this = this;\n        // @ts-ignore\n        window.result_page = this;\n        return (h(\"div\", { class: \"root\" }, h(\"div\", { class: \"header\" }, h(\"div\", { class: \"log-info\" }, h(\"div\", { class: \"log-info-header\" + (this.display_log ? \" open\" : \"\"), onClick: function () { return _this.display_log = _this.display_log ? false : true; } }, h(\"span\", null, \" Job info \"), \" \", h(\"i\", { class: \"material-icons\" }, this.display_log ? \"arrow_drop_up\" : \"arrow_drop_down\")), h(\"div\", { class: \"log-info-content\", style: { display: this.display_log ? 'grid' : 'none' } }, h(\"div\", { class: \"first-col\" }, h(\"span\", null, \"Job id : \", this.job_tag), h(\"span\", null, \"Total hits : \", this.total_hits), h(\"span\", null, \"Displayed hits : \", this.sequence_data_json.length)), h(\"div\", { class: \"second-col\" }, this.displayExcluded()))), h(\"div\", { class: \"download w3-dropdown-hover\" }, h(\"span\", { class: \"download-dropdown-header\" }, \" Download results\"), h(\"div\", { class: \"w3-dropdown-content w3-bar-block w3-border\" }, h(\"a\", { href: \"download/\" + this.job_tag, class: \"w3-bar-item w3-button\" }, \"All raw results\"), h(\"a\", { href: \"#\", class: \"w3-bar-item w3-button\", onClick: function () { return _this.createSelectionFile(); } }, \"Selected sgRNAs\")))), h(\"div\", { class: \"table\" }, h(\"table-crispr\", { card_selection: this.select_card, selected: this.selected, complete_data: this.sequence_data_json, onOrganismClick: function (organism, sgrna) {\n                _this.current_references = _this.getReferencesWithSeq(organism, sgrna);\n                //this.hidden_references = this.getHiddenReferences(organism); \n                var ref_selected = _this.current_references[0];\n                _this.current_sgrnas = _this.getSgrnas(organism, ref_selected);\n                _this.selected = {\n                    org: organism,\n                    sgrna: sgrna,\n                    ref: ref_selected,\n                    size: _this.getSize(organism, ref_selected),\n                    fasta_header: _this.getFastaHeader(organism, ref_selected)\n                };\n                _this.shouldHighlight = true;\n                _this.initial_sgrnas = _this.current_sgrnas;\n                _this.current_genes = _this.gene_json ? _this.getGenesCoordinates(organism, ref_selected) : undefined;\n            }, shouldHighlight: this.shouldHighlight, gene: this.gene_json ? true : false, reinitSelection: function () {\n                _this.current_references = [];\n                _this.current_sgrnas = [];\n                _this.selected = {\n                    org: undefined,\n                    sgrna: undefined,\n                    ref: undefined,\n                    size: undefined,\n                    fasta_header: undefined\n                };\n            }, cardAction: function (target, sgrnas) {\n                if (target.checked)\n                    _this.addToCard(sgrnas);\n                else\n                    _this.removeFromCard(sgrnas);\n            } })), h(\"div\", { class: \"right-panel\" }, h(\"div\", { class: \"first-line\" }, h(\"dropdown-menu\", { organisms: this.organisms, fasta_refs: this.current_references, sgrnas: this.current_sgrnas, selected: this.selected, selectOrg: function (org) {\n                _this.shouldHighlight = false;\n                _this.current_references = _this.getReferences(org);\n                _this.current_sgrnas = [];\n                _this.selected = {\n                    org: org,\n                    sgrna: undefined,\n                    ref: undefined,\n                    size: undefined,\n                    fasta_header: undefined,\n                };\n            }, selectRef: function (ref) {\n                _this.current_sgrnas = _this.getSgrnas(_this.selected.org, ref);\n                _this.current_genes = _this.gene_json ? _this.getGenesCoordinates(_this.selected.org, ref) : undefined;\n                _this.shouldHighlight = false;\n                _this.selected = Object.assign(Object.assign({}, _this.selected), { sgrna: undefined, ref: ref, size: undefined, fasta_header: undefined });\n            }, selectSgrna: function (sgrna) {\n                _this.shouldHighlight = false;\n                _this.selected = Object.assign(Object.assign({}, _this.selected), { sgrna: sgrna, size: _this.getSize(_this.selected.org, _this.selected.ref), fasta_header: _this.getFastaHeader(_this.selected.org, _this.selected.ref) });\n            } }), this.displayCoords()), this.displayCard())));\n    };\n    return ResultPage;\n}());\nResultPage.style = resultPageCss;\nexport { ResultPage as result_page };\n"],"sourceRoot":""}